<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Using with Depth Camera" href="2d_nvblox_demo.html" /><link rel="prev" title="Using with Isaac Sim" href="2b_isaacsim_examples.html" />

    <!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>Collision World Representation - cuRobo</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../_static/custom_furo.css?v=a13d9812" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-api-pre-name: #76b900;
  --color-api-name: #76b900;
  --color-admonition-title--seealso: #ffffff;
  --color-admonition-title-background--seealso: #448aff;
  --color-admonition-title-background--note: #76b900;
  --color-admonition-title--note: #ffffff;
  --color-brand-primary: #76b900;
  --color-sidebar-background: #f5fff5;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-admonition-title-background--note: #535353;
  --color-admonition-title--note: #ffffff;
  --color-brand-primary: #76b900;
  --color-brand-content: #76b900;
  --color-sidebar-background: #000000;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-admonition-title-background--note: #535353;
  --color-admonition-title--note: #ffffff;
  --color-brand-primary: #76b900;
  --color-brand-content: #76b900;
  --color-sidebar-background: #000000;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">cuRobo</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/logo-light-mode.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../_static/logo-dark-mode.png" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">cuRobo</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../research_index.html">Research</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Research</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../research/research.html">Technical Report</a></li>
<li class="toctree-l2"><a class="reference internal" href="../research/research_using_curobo.html">Research using cuRobo</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="../get_started_index.html">Get Started</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Get Started</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="1_install_instructions.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="1a_quick_overview.html">Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="2a_python_examples.html">Using in Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="2b_isaacsim_examples.html">Using with Isaac Sim</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Collision World Representation</a></li>
<li class="toctree-l2"><a class="reference internal" href="2d_nvblox_demo.html">Using with Depth Camera</a></li>
<li class="toctree-l2"><a class="reference internal" href="2e_torch_layer_example.html">Using in a Neural Network</a></li>
<li class="toctree-l2"><a class="reference internal" href="4_benchmarks.html">Benchmarks &amp; Profiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="5_docker_development.html">Docker Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="6_known_issues.html">Known Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="7_api.html">Python API</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../advanced_examples_index.html">Advanced Examples</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Advanced Examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../advanced_examples/1_batch_env.html">Batched Environments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced_examples/2_block_stacking_example.html">Block Stacking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced_examples/3_constrained_planning.html">Constrained Planning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced_examples/4_robot_segmentation.html">Robot Segmentation</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials_index.html">Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Tutorials</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/1_robot_configuration.html">Configuring a New Robot</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../developer_notes_index.html">Developer Notes</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Developer Notes</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../notes/01_robot_list.html">Supported Robots</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notes/02_numerical_optimization.html">Numerical Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notes/03_performance_tuning.html">Performance Tuning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notes/04_cuda_kernels.html">CUDA Notes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notes/05_usd_api.html">USD for Robot and World Representation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../notes/07_environment_variables.html">Environment Variables</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="collision-world-representation">
<span id="world-collision"></span><h1>Collision World Representation<a class="headerlink" href="#collision-world-representation" title="Link to this heading">¶</a></h1>
<section id="world-representation">
<h2>World Representation<a class="headerlink" href="#world-representation" title="Link to this heading">¶</a></h2>
<p>cuRobo represents the world with an instance of <a class="reference internal" href="../_api/curobo.geom.types.html#curobo.geom.types.WorldConfig" title="curobo.geom.types.WorldConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">curobo.geom.types.WorldConfig</span></code></a> which
can store world objects as primitives, meshes, and depth images using nvblox or voxelization.
cuRobo has GPU accelerated functions for collision queries with cuboids, meshes, nvblox maps, and
euclidean signed distance voxel grids. Other primitive types can be approximated to a cuboid or a
mesh using helper functions described later in this page. An overview of the world representation
and collision checkers is illustrated below.</p>
<div class="graphviz"><object data="../_images/graphviz-1d9ef029890c958af719051367634ffbc13e1855.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph {
edge [color = &quot;#2B4162&quot;; fontsize=10];
node [shape=&quot;box&quot;, style=&quot;rounded, filled&quot;, fontsize=12, color=&quot;#cccccc&quot;]
&quot;Cuboid[]&quot; [color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
&quot;Mesh[]&quot; [color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
&quot;VoxelGrid[]&quot; [color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]

&quot;BloxMap[]&quot; [color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
&quot;WorldConfig&quot; [color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
&quot;WorldConfig&quot; -&gt; &quot;Cuboid[]&quot;;
&quot;WorldConfig&quot; -&gt; &quot;Mesh[]&quot;;
&quot;WorldConfig&quot; -&gt; &quot;BloxMap[]&quot;;
&quot;WorldConfig&quot; -&gt; &quot;Sphere[]&quot;;
&quot;WorldConfig&quot; -&gt; &quot;Cylinder[]&quot;;
&quot;WorldConfig&quot; -&gt; &quot;Capsule[]&quot;;
&quot;WorldConfig&quot; -&gt; &quot;VoxelGrid[]&quot;;
&quot;Cuboid[]&quot; -&gt; &quot;WorldCollision&quot;;
&quot;Mesh[]&quot; -&gt; WorldMeshCollision;
&quot;BloxMap[]&quot; -&gt; WorldBloxCollision;
&quot;VoxelGrid[]&quot; -&gt; WorldVoxelCollision;
subgraph cluster_collision{
label=&quot;Collision Checker&quot;;
&quot;WorldCollision&quot; [label=&quot;WorldPrimitiveCollision&quot;, color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
&quot;WorldMeshCollision&quot; [color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
&quot;WorldBloxCollision&quot; [color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
&quot;WorldVoxelCollision&quot; [color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
&quot;WorldCollision&quot; -&gt; &quot;WorldMeshCollision&quot; [label=&quot;inheritance&quot;, style=&quot;dashed&quot;,
color=&quot;#76b900&quot;];
&quot;WorldMeshCollision&quot; -&gt; &quot;WorldBloxCollision&quot; [label=&quot;inheritance&quot;, style=&quot;dashed&quot;,
color=&quot;#76b900&quot;];
&quot;WorldMeshCollision&quot; -&gt; &quot;WorldVoxelCollision&quot; [label=&quot;inheritance&quot;, style=&quot;dashed&quot;,
color=&quot;#76b900&quot;];


}

}</p></object></div>
<p>
<video autoplay="True" loop="True" muted="True" preload="auto" width="100%"><source src="../videos/collision_demo.mp4" type="video/mp4"></video>
</p><p>We will look at some examples in python. First, we will load a world that contains one object of
each type,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">curobo.geom.types</span> <span class="kn">import</span> <span class="n">WorldConfig</span><span class="p">,</span> <span class="n">Cuboid</span><span class="p">,</span> <span class="n">Mesh</span><span class="p">,</span> <span class="n">Capsule</span><span class="p">,</span> <span class="n">Cylinder</span><span class="p">,</span> <span class="n">Sphere</span>
<span class="kn">from</span> <span class="nn">curobo.util_file</span> <span class="kn">import</span> <span class="n">get_assets_path</span><span class="p">,</span> <span class="n">join_path</span>

<span class="n">obstacle_1</span> <span class="o">=</span> <span class="n">Cuboid</span><span class="p">(</span>
     <span class="n">name</span><span class="o">=</span><span class="s2">&quot;cube_1&quot;</span><span class="p">,</span>
     <span class="n">pose</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.043</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.471</span><span class="p">,</span> <span class="mf">0.284</span><span class="p">,</span> <span class="mf">0.834</span><span class="p">],</span>
     <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span>
     <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
 <span class="p">)</span>

<span class="c1"># describe a mesh obstacle</span>
<span class="c1"># import a mesh file:</span>

<span class="n">mesh_file</span> <span class="o">=</span> <span class="n">join_path</span><span class="p">(</span><span class="n">get_assets_path</span><span class="p">(),</span> <span class="s2">&quot;scene/nvblox/srl_ur10_bins.obj&quot;</span><span class="p">)</span>

<span class="n">obstacle_2</span> <span class="o">=</span> <span class="n">Mesh</span><span class="p">(</span>
   <span class="n">name</span><span class="o">=</span><span class="s2">&quot;mesh_1&quot;</span><span class="p">,</span>
   <span class="n">pose</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.043</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.471</span><span class="p">,</span> <span class="mf">0.284</span><span class="p">,</span> <span class="mf">0.834</span><span class="p">],</span>
   <span class="n">file_path</span><span class="o">=</span><span class="n">mesh_file</span><span class="p">,</span>
   <span class="n">scale</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">obstacle_3</span> <span class="o">=</span> <span class="n">Capsule</span><span class="p">(</span>
   <span class="n">name</span><span class="o">=</span><span class="s2">&quot;capsule&quot;</span><span class="p">,</span>
   <span class="n">radius</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
   <span class="n">base</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
   <span class="n">tip</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span>
   <span class="n">pose</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.043</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.471</span><span class="p">,</span> <span class="mf">0.284</span><span class="p">,</span> <span class="mf">0.834</span><span class="p">],</span>
   <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">obstacle_4</span> <span class="o">=</span> <span class="n">Cylinder</span><span class="p">(</span>
   <span class="n">name</span><span class="o">=</span><span class="s2">&quot;cylinder_1&quot;</span><span class="p">,</span>
   <span class="n">radius</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
   <span class="n">height</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
   <span class="n">pose</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.043</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.471</span><span class="p">,</span> <span class="mf">0.284</span><span class="p">,</span> <span class="mf">0.834</span><span class="p">],</span>
   <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">obstacle_5</span> <span class="o">=</span> <span class="n">Sphere</span><span class="p">(</span>
   <span class="n">name</span><span class="o">=</span><span class="s2">&quot;sphere_1&quot;</span><span class="p">,</span>
   <span class="n">radius</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
   <span class="n">pose</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.043</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.471</span><span class="p">,</span> <span class="mf">0.284</span><span class="p">,</span> <span class="mf">0.834</span><span class="p">],</span>
   <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">world_model</span> <span class="o">=</span> <span class="n">WorldConfig</span><span class="p">(</span>
   <span class="n">mesh</span><span class="o">=</span><span class="p">[</span><span class="n">obstacle_2</span><span class="p">],</span>
   <span class="n">cuboid</span><span class="o">=</span><span class="p">[</span><span class="n">obstacle_1</span><span class="p">],</span>
   <span class="n">capsule</span><span class="o">=</span><span class="p">[</span><span class="n">obstacle_3</span><span class="p">],</span>
   <span class="n">cylinder</span><span class="o">=</span><span class="p">[</span><span class="n">obstacle_4</span><span class="p">],</span>
   <span class="n">sphere</span><span class="o">=</span><span class="p">[</span><span class="n">obstacle_5</span><span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
<p>We can visualize the world by saving the objects to a mesh file and loading using a mesh viewer
such as <a class="reference external" href="https://www.meshlab.net/">meshlab</a>. We assign a random color to each mesh and save it
to a file,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># assign random color to each obstacle for visualization</span>
<span class="n">world_model</span><span class="o">.</span><span class="n">randomize_color</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="p">[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span> <span class="n">g</span><span class="o">=</span><span class="p">[</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">])</span>

<span class="n">file_path</span> <span class="o">=</span> <span class="s2">&quot;debug_mesh.obj&quot;</span>
<span class="n">world_model</span><span class="o">.</span><span class="n">save_world_as_mesh</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default" id="id2">
<a class="reference internal image-reference" href="../_images/world_representation.png"><img alt="../_images/world_representation.png" src="../_images/world_representation.png" style="width: 690px;" />
</a>
<figcaption>
<p><span class="caption-text">Five object types that are available in cuRobo’s WorldConfig are visualized, with Cuboid, Mesh,
Capsule, Cylinder, and Sphere from left to right.</span><a class="headerlink" href="#id2" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>To use this world in a collision checker, we need to approximate some object types as cuRobo
currently only provides a collision checker for cuboids and meshes. Capsules, cylinders, and spheres
can be approximated to cuboids using <a class="reference internal" href="../_api/curobo.geom.types.html#curobo.geom.types.WorldConfig.create_obb_world" title="curobo.geom.types.WorldConfig.create_obb_world"><code class="xref py py-class docutils literal notranslate"><span class="pre">curobo.geom.types.WorldConfig.create_obb_world</span></code></a>,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># convert all objects into cuboids (oriented bounding boxes OBB)</span>
<span class="n">cuboid_world</span> <span class="o">=</span> <span class="n">WorldConfig</span><span class="o">.</span><span class="n">create_obb_world</span><span class="p">(</span><span class="n">world_model</span><span class="p">)</span>

<span class="n">cuboid_world</span><span class="o">.</span><span class="n">save_world_as_mesh</span><span class="p">(</span><span class="s2">&quot;debug_collision_cuboid.obj&quot;</span><span class="p">)</span>
</pre></div>
</div>
<figure class="align-default" id="id3">
<a class="reference internal image-reference" href="../_images/world_approximation.png"><img alt="../_images/world_approximation.png" src="../_images/world_approximation.png" style="width: 690px;" />
</a>
<figcaption>
<p><span class="caption-text">cuboid approximation of different object types are visulaized in the bottom row.</span><a class="headerlink" href="#id3" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>Alternatively, the objects can also be approximated as meshes, which are more accurate using,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Keep cuboid objects as cuboids, nvblox as nvblox,  and convert all others to meshes.</span>
<span class="n">collision_supported_world</span> <span class="o">=</span> <span class="n">WorldConfig</span><span class="o">.</span><span class="n">create_collision_support_world</span><span class="p">(</span><span class="n">world_model</span><span class="p">)</span>
<span class="n">collision_support_world</span><span class="o">.</span><span class="n">save_world_as_mesh</span><span class="p">(</span><span class="s2">&quot;debug_collision_mesh.obj&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>cuRobo’s cuboid collision checker is 4x faster than the mesh collision checker, so approximate
objects to cuboids when possible to save compute time.</p>
</div>
</section>
<section id="world-collision-checkers">
<h2>World Collision Checkers<a class="headerlink" href="#world-collision-checkers" title="Link to this heading">¶</a></h2>
<p>There are four collision checkers available in cuRobo, all starting from an abstract base class
<a class="reference internal" href="../_api/curobo.geom.sdf.world.html#curobo.geom.sdf.world.WorldCollision" title="curobo.geom.sdf.world.WorldCollision"><code class="xref py py-class docutils literal notranslate"><span class="pre">curobo.geom.sdf.world.WorldCollision</span></code></a>.  The cuboid collision checker is in
<a class="reference internal" href="../_api/curobo.geom.sdf.world.html#curobo.geom.sdf.world.WorldPrimitiveCollision" title="curobo.geom.sdf.world.WorldPrimitiveCollision"><code class="xref py py-class docutils literal notranslate"><span class="pre">curobo.geom.sdf.world.WorldPrimitiveCollision</span></code></a> which uses custom CUDA kernels to compute
collision and signed distance between query spheres and world cuboids. The mesh collision checker is
in <a class="reference internal" href="../_api/curobo.geom.sdf.world_mesh.html#curobo.geom.sdf.world_mesh.WorldMeshCollision" title="curobo.geom.sdf.world_mesh.WorldMeshCollision"><code class="xref py py-class docutils literal notranslate"><span class="pre">curobo.geom.sdf.world_mesh.WorldMeshCollision</span></code></a>, which uses a BVH traversal method to find
the closest point on a mesh given query spheres leveraging implementations available in <a class="reference external" href="https://developer.nvidia.com/warp-python">NVIDIA Warp</a>. cuRobo also provides a nvblox based collision checker
in <a class="reference internal" href="../_api/curobo.geom.sdf.world_blox.html#curobo.geom.sdf.world_blox.WorldBloxCollision" title="curobo.geom.sdf.world_blox.WorldBloxCollision"><code class="xref py py-class docutils literal notranslate"><span class="pre">curobo.geom.sdf.world_blox.WorldBloxCollision</span></code></a> that can compute collisions with a list of
nvblox map instances that integrate camera depth images.</p>
<p>cuRobo also provides a voxel grid based
collision checker in <a class="reference internal" href="../_api/curobo.geom.sdf.world_voxel.html#curobo.geom.sdf.world_voxel.WorldVoxelCollision" title="curobo.geom.sdf.world_voxel.WorldVoxelCollision"><code class="xref py py-class docutils literal notranslate"><span class="pre">curobo.geom.sdf.world_voxel.WorldVoxelCollision</span></code></a> that can compute
collisions with respect to voxel grids that contain signed distance in each voxel. These voxel
grids can be filled with ESDF from other collision checkers to further speed up collision checking.
An example is provided in <cite>benchmarks/curobo_voxel_benchmark.py</cite> that stores a ESDF grid from
a world represented by cuboids.</p>
<p>cuRobo leverages python inheritance to combine collision checkers, where the nvblox collision
checker inherits from the mesh collision checker and the mesh collision checker inherits from the
cuboid collision checker.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>cuRobo does not provide mesh to mesh collision queries. Instead, collision checking is performed
by approximating one object to spheres and performing closest point queries on meshes. cuRobo
provides some approximation algorithms for converting meshes to spheres.</p>
</div>
<p>cuRobo’s collision checkers take as a input spheres which are of shape <code class="docutils literal notranslate"><span class="pre">[batch,</span> <span class="pre">horizon,</span> <span class="pre">n,</span> <span class="pre">4]</span></code>, where
n represents the number of spheres for one entity. cuRobo uses <code class="docutils literal notranslate"><span class="pre">horizon</span></code> to represent the trajectory
of a sphere, which is leveraged in cuRobo’s continuous collision checker. The output signed distance
will be of shape <code class="docutils literal notranslate"><span class="pre">[batch,</span> <span class="pre">horizon,</span> <span class="pre">n]</span></code>, which can then be summed based on your use case. cuRobo
uses <code class="docutils literal notranslate"><span class="pre">batch</span></code> in two ways, (1) to parallelize across different rollouts such as in trajectory optimization, and
(2) to parallelize across different environments when available.</p>
<p>We can pass a world model to cuRobo’s collision checker and perform collision queries,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">world_config</span> <span class="o">=</span> <span class="n">WorldCollisionConfig</span><span class="p">(</span><span class="n">tensor_args</span><span class="p">,</span> <span class="n">world_model</span><span class="o">=</span><span class="n">collision_support_world</span><span class="p">)</span>
<span class="n">world_ccheck</span> <span class="o">=</span> <span class="n">WorldMeshCollision</span><span class="p">(</span><span class="n">world_config</span><span class="p">)</span>
<span class="n">world_ccheck</span><span class="o">.</span><span class="n">create_collision_cache</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>


<span class="n">new_mesh</span> <span class="o">=</span> <span class="n">Mesh</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;test_mesh&quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="o">=</span><span class="n">mesh_file</span><span class="p">,</span> <span class="n">pose</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">world_ccheck</span><span class="o">.</span><span class="n">add_mesh</span><span class="p">(</span>
   <span class="n">new_mesh</span><span class="p">,</span>
   <span class="n">env_idx</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">query_spheres</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="o">**</span><span class="nb">vars</span><span class="p">(</span><span class="n">tensor_args</span><span class="p">))</span>

<span class="n">out</span> <span class="o">=</span> <span class="n">world_ccheck</span><span class="o">.</span><span class="n">get_sphere_distance</span><span class="p">(</span><span class="n">query_spheres</span><span class="p">,</span> <span class="n">collision_buffer</span><span class="p">,</span>
<span class="n">act_distance</span><span class="p">,</span>
<span class="n">weight</span><span class="p">)</span>
<span class="n">out</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Internally, each collision checker creates a tensorized object buffer on the GPU. Each object in the buffer will contain the object’s pose with respect to the robot’s base frame, geometry data, and a enable flag. This enable flag is used inside the collision kernels to know if
the object is enabled for collision checking.</p>
<div align="center" class="align-center"><div class="graphviz"><object data="../_images/graphviz-571328c03af338e5a2ddbf8196cbce4d4515043f.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph {
   edge [color = &quot;#2B4162&quot;; fontsize=10];
   node [shape=&quot;box&quot;, style=&quot;rounded, filled&quot;, fontsize=12, color=&quot;#cccccc&quot;]
   &quot;Obstacle&quot; -&gt; &quot;Pose&quot;;
   &quot;Obstacle&quot; -&gt; &quot;Enable&quot;;
   &quot;Obstacle&quot; -&gt; &quot;Data&quot;;
}</p></object></div>
</div>
<p>This object buffer is initialized based on the objects passed in through the <cite>world_model</cite> parameter in <a class="reference internal" href="../_api/curobo.geom.sdf.world.html#curobo.geom.sdf.world.WorldCollisionConfig" title="curobo.geom.sdf.world.WorldCollisionConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">curobo.geom.sdf.world.WorldCollisionConfig</span></code></a>. Optionally, you can set the buffer
size by passing a dictionary of number of objects per collision checker using the <cite>cache</cite> parameter
in <a class="reference internal" href="../_api/curobo.geom.sdf.world.html#curobo.geom.sdf.world.WorldCollisionConfig" title="curobo.geom.sdf.world.WorldCollisionConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">curobo.geom.sdf.world.WorldCollisionConfig</span></code></a>. cuRobo leverages this cache to load objects
later without having to recreate tensors, thereby not breaking any CUDAGraphs already built. This buffer is what enables the drag and drop interface in Isaac Sim, which is explained in <a class="reference internal" href="2b_isaacsim_examples.html#overview-isaacsim"><span class="std std-ref">Using with Isaac Sim</span></a> page.</p>
<p>For example, you can create a cuboid object
buffer of 10 objects and mesh object buffer of 3 objects using <code class="docutils literal notranslate"><span class="pre">cache={&quot;obb&quot;:10,</span> <span class="pre">&quot;mesh&quot;:</span> <span class="pre">3}</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">world_collision_config</span> <span class="o">=</span> <span class="n">WorldCollisionConfig</span><span class="p">(</span><span class="n">tensor_args</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;obb&quot;</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;mesh&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
<span class="n">world_ccheck</span> <span class="o">=</span> <span class="n">WorldMeshCollision</span><span class="p">(</span><span class="n">world_collision_config</span><span class="p">)</span>

<span class="n">new_cuboid</span> <span class="o">=</span> <span class="n">Cuboid</span><span class="p">(</span>
  <span class="n">name</span><span class="o">=</span><span class="s2">&quot;cube_1&quot;</span><span class="p">,</span>
  <span class="n">pose</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.043</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.471</span><span class="p">,</span> <span class="mf">0.284</span><span class="p">,</span> <span class="mf">0.834</span><span class="p">],</span>
  <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span>
  <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
<span class="p">)</span>


<span class="n">world_ccheck</span><span class="o">.</span><span class="n">add_cuboid</span><span class="p">(</span>
   <span class="n">new_cuboid</span>
<span class="p">)</span>

<span class="n">new_mesh</span> <span class="o">=</span> <span class="n">Mesh</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;test_mesh&quot;</span><span class="p">,</span> <span class="n">file_path</span><span class="o">=</span><span class="n">mesh_file</span><span class="p">,</span> <span class="n">pose</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

<span class="n">world_ccheck</span><span class="o">.</span><span class="n">add_mesh</span><span class="p">(</span>
   <span class="n">new_mesh</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">query_spheres</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="o">**</span><span class="nb">vars</span><span class="p">(</span><span class="n">tensor_args</span><span class="p">))</span>

<span class="n">out</span> <span class="o">=</span> <span class="n">world_ccheck</span><span class="o">.</span><span class="n">get_sphere_distance</span><span class="p">(</span><span class="n">query_spheres</span><span class="p">,</span> <span class="n">collision_buffer</span><span class="p">,</span>
<span class="n">act_distance</span><span class="p">,</span>
<span class="n">weight</span><span class="p">)</span>
<span class="n">out</span> <span class="o">=</span> <span class="n">out</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>We can update the pose of objects that are in the cache by specifying the name of the object,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># update a cuboid obstacle pose</span>
<span class="kn">from</span> <span class="nn">curobo.types.math</span> <span class="kn">import</span> <span class="n">Pose</span>

<span class="n">new_pose</span> <span class="o">=</span> <span class="n">Pose</span><span class="o">.</span><span class="n">from_list</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">tensor_args</span><span class="o">=</span><span class="n">tensor_args</span><span class="p">)</span>
<span class="n">world_ccheck</span><span class="o">.</span><span class="n">update_obstacle_pose</span><span class="p">(</span><span class="n">new_pose</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;cube_1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>We can toggle an object’s use in collision checking by using the <cite>enable_obstacle</cite> function,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">world_ccheck</span><span class="o">.</span><span class="n">enable_obstacle</span><span class="p">(</span><span class="s2">&quot;cube_1&quot;</span><span class="p">,</span> <span class="n">enable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>cuRobo’s signed distance queries return a positive value when the sphere is inside an obstacle or
within activation distance. If outside this range, the distance value will be zero.</p>
</div>
<section id="batched-environments">
<h3>Batched Environments<a class="headerlink" href="#batched-environments" title="Link to this heading">¶</a></h3>
<p>cuRobo also provides batched world representation, where many worlds can be setup, and collision queries
are mapped based on batch index of the spheres. We will look at a short python example below. A
more thorough suite of examples are available in <a class="reference internal" href="../advanced_examples/1_batch_env.html#tut-batch-env"><span class="std std-ref">Batched Environments</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tensor_args</span> <span class="o">=</span> <span class="n">TensorDeviceType</span><span class="p">()</span>
<span class="n">world_config_1</span> <span class="o">=</span> <span class="n">WorldConfig</span><span class="p">(</span>
   <span class="n">cuboid</span><span class="o">=</span><span class="p">[</span>
      <span class="n">Cuboid</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;cube_env_1&quot;</span><span class="p">,</span>
            <span class="n">pose</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span>
            <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
      <span class="p">)</span>
   <span class="p">]</span>
<span class="p">)</span>
<span class="n">world_config_2</span> <span class="o">=</span> <span class="n">WorldConfig</span><span class="p">(</span>
   <span class="n">cuboid</span><span class="o">=</span><span class="p">[</span>
      <span class="n">Cuboid</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;cube_env_2&quot;</span><span class="p">,</span>
            <span class="n">pose</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
            <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],</span>
            <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
      <span class="p">)</span>
   <span class="p">]</span>
<span class="p">)</span>

<span class="n">world_coll_config</span> <span class="o">=</span> <span class="n">WorldCollisionConfig</span><span class="p">(</span>
   <span class="n">tensor_args</span><span class="p">,</span> <span class="n">world_model</span><span class="o">=</span><span class="p">[</span><span class="n">world_config_1</span><span class="p">,</span> <span class="n">world_config_2</span><span class="p">]</span>
<span class="p">)</span>

<span class="n">world_ccheck</span> <span class="o">=</span> <span class="n">WorldPrimitiveCollision</span><span class="p">(</span><span class="n">world_coll_config</span><span class="p">)</span>

<span class="n">x_sph</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="n">device</span><span class="o">=</span><span class="n">tensor_args</span><span class="o">.</span><span class="n">device</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">tensor_args</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
<span class="n">x_sph</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.1</span>

<span class="n">query_buffer</span> <span class="o">=</span> <span class="n">CollisionQueryBuffer</span><span class="o">.</span><span class="n">initialize_from_shape</span><span class="p">(</span>
   <span class="n">x_sph</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">tensor_args</span><span class="p">,</span> <span class="n">world_ccheck</span><span class="o">.</span><span class="n">collision_types</span>
<span class="p">)</span>
<span class="n">act_distance</span> <span class="o">=</span> <span class="n">tensor_args</span><span class="o">.</span><span class="n">to_device</span><span class="p">([</span><span class="mf">0.0</span><span class="p">])</span>

<span class="n">weight</span> <span class="o">=</span> <span class="n">tensor_args</span><span class="o">.</span><span class="n">to_device</span><span class="p">([</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<p>querying sphere distance by default will only check with environment 0,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="n">world_ccheck</span><span class="o">.</span><span class="n">get_sphere_distance</span><span class="p">(</span>
   <span class="n">x_sph</span><span class="p">,</span>
   <span class="n">query_buffer</span><span class="p">,</span>
   <span class="n">weight</span><span class="p">,</span>
   <span class="n">act_distance</span><span class="p">,</span>
<span class="p">)</span>

<span class="k">assert</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0.2</span> <span class="ow">and</span> <span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0.2</span>
</pre></div>
</div>
<p>passing an environment index, which contains the index of the collision environment per batch will
query the spheres w.r.t. to the specified environment,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">env_query_idx</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">x_sph</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">device</span><span class="o">=</span><span class="n">tensor_args</span><span class="o">.</span><span class="n">device</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">torch</span><span class="o">.</span><span class="n">int32</span><span class="p">)</span>
<span class="n">env_query_idx</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">world_ccheck</span><span class="o">.</span><span class="n">get_sphere_distance</span><span class="p">(</span>
   <span class="n">x_sph</span><span class="p">,</span> <span class="n">query_buffer</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">act_distance</span><span class="p">,</span> <span class="n">env_query_idx</span><span class="o">=</span><span class="n">env_query_idx</span>
<span class="p">)</span>

<span class="k">assert</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0.2</span> <span class="ow">and</span> <span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0.0</span>
</pre></div>
</div>
<p>Note that this environment is per batch and the query spheres shape is <code class="docutils literal notranslate"><span class="pre">[batch,</span> <span class="pre">horizon,</span> <span class="pre">n,</span> <span class="pre">4]</span></code>.</p>
<p>To perform collision checking with live depth images, refer to <a class="reference internal" href="2d_nvblox_demo.html#depth-image-example"><span class="std std-ref">Using with Depth Camera</span></a> tutorial.</p>
</section>
</section>
<section id="collision-checking-implementation">
<span id="collision-checking-note"></span><h2>Collision Checking Implementation<a class="headerlink" href="#collision-checking-implementation" title="Link to this heading">¶</a></h2>
<p>We want to be able to update the pose of obstacles without requiring additional post processing. To acheive this, we provide each obstacle type with a pose and project each query point to each obstacle’s local frame of reference to perform collision queries. While this can be slow on very large scenes as we would have to iterate over all objects, we found this to be better when working on less than 50 obstacles. This process is shown in the below flow chart. We leave using a fast world bvh (bounding volume hierarchy) for a later release (contributions welcome!).</p>
<p>We also implement a continuous collision checker that only requires a closest point function to implement. We dive into this algorithm in our technical report and only illustrate the computation flow below.</p>
<figure class="align-center" id="id4">
<div class="graphviz"><object data="../_images/graphviz-e2439a2fb365dc0f821b83bb47a1c2e7b12fa3a9.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph{

bgcolor = &quot;#fefefe&quot;
edge [color = &quot;#2B4162&quot;; fontsize=10];
node [shape=&quot;box&quot;, style=&quot;rounded, filled&quot;, fontsize=12, color=&quot;#cccccc&quot;]
bquery [label=&quot;Batch of Spheres&quot;, style=&quot;rounded&quot;, shape=&quot;plain&quot;]

query [label=&quot;query sphere&quot;, style=&quot;rounded&quot;, shape=&quot;plain&quot;]
transform [label=&quot;Transform Sphere to Obj. Frame&quot;, color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
check [label=&quot;Check collision&quot;, color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
clpt [label=&quot;Compute Closest Point on object to sphere&quot;, color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
cost [label=&quot;Compute cost  &amp; gradient&quot;, color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]

inv_transform [label=&quot;Transform gradient to World Frame&quot;, color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
sum_cost [label=&quot;Sum Cost &amp; Gradient&quot;, color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
write [label=&quot;Write Cost &amp; Gradient&quot;, color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
sum_all [label=&quot;Sum Cost across Spheres&quot;, color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
enable [label=&quot;Obstacle Enabled?&quot;, color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
bquery -&gt; query;

subgraph cluster_kernel{
label=&quot;1 Thread per Sphere&quot;;
color=&quot;#76b900&quot;;
query -&gt; enable ;

subgraph cluster_object {
color=&quot;#2B4162&quot;;

label=&quot;For loop over objects in sphere environment&quot;;
enable -&gt; transform[label=&quot;only when enabled&quot;];
transform -&gt; check [label=&quot;sphere in object frame&quot;];
check -&gt; clpt[style=&quot;dashed&quot;];

subgraph cluster_collision {
color=&quot;#2B4162&quot;;
label=&quot;If in collision&quot;;
style=&quot;dashed&quot;;
clpt -&gt; cost[style=&quot;dashed&quot;];
cost -&gt; inv_transform [style=&quot;dashed&quot;];
inv_transform -&gt; sum_cost [label=&quot;gradient in world frame&quot;, style=&quot;dashed&quot;];
}
}
sum_cost -&gt; write;
}
write -&gt; sum_all;


}</p></object></div>
<figcaption>
<p><span class="caption-text">Collision checking process is illustrated.</span><a class="headerlink" href="#id4" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id5">
<div class="graphviz"><object data="../_images/graphviz-0785c68538308e5e9f12aea36113752051799e39.svg" type="image/svg+xml" class="graphviz">
<p class="warning">digraph{
bgcolor = &quot;#fefefe&quot;
edge [color = &quot;#2B4162&quot;; fontsize=10];
node [shape=&quot;box&quot;, style=&quot;rounded, filled&quot;, fontsize=12, color=&quot;#cccccc&quot;]
bquery [label=&quot;Batch of Trajectories of Spheres &quot;, style=&quot;rounded&quot;, shape=&quot;plain&quot;]

query [label=&quot;query sphere at [t-1, t, t+1]&quot;, style=&quot;rounded&quot;, shape=&quot;plain&quot;]
transform [label=&quot;Transform Spheres to Obj. Frame&quot;, color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
check [label=&quot;Continuous Collision Algorithm&quot;, color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
speed [label=&quot;Speed Metric&quot;, color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]

inv_transform [label=&quot;Transform gradient to World Frame&quot;, color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
sum_cost [label=&quot;Sum Cost &amp; Gradient&quot;, color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
write [label=&quot;Write Cost &amp; Gradient&quot;, color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
sum_all [label=&quot;Sum Cost across Trajectories of Spheres&quot;, color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
enable [label=&quot;Obstacle Enabled?&quot;, color=&quot;#76b900&quot;, fontcolor=&quot;#FFFFFF&quot;]
bquery -&gt; query;

subgraph cluster_kernel{
label=&quot;1 Thread per Sphere&quot;;
color=&quot;#76b900&quot;;
query -&gt; enable ;

subgraph cluster_object {
color=&quot;#2B4162&quot;;

label=&quot;For loop over objects in sphere environment&quot;;
enable -&gt; transform[label=&quot;only when enabled&quot;];
transform -&gt; check [label=&quot;sphere in object frame&quot;];
check -&gt; inv_transform[label=&quot;gradient in object frame&quot;];

inv_transform -&gt; sum_cost [label=&quot;gradient in world frame&quot;];
}
sum_cost -&gt; speed;
speed -&gt; write;
}
write -&gt; sum_all;


}</p></object></div>
<figcaption>
<p><span class="caption-text">Continuous collision checking process is illustrated.</span><a class="headerlink" href="#id5" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="collision-metric">
<h3>Collision Metric<a class="headerlink" href="#collision-metric" title="Link to this heading">¶</a></h3>
<p>Our collision cost contains several configurable weights as listed in <a class="reference internal" href="../_api/curobo.rollout.cost.primitive_collision_cost.html#curobo.rollout.cost.primitive_collision_cost.PrimitiveCollisionCostConfig" title="curobo.rollout.cost.primitive_collision_cost.PrimitiveCollisionCostConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">curobo.rollout.cost.primitive_collision_cost.PrimitiveCollisionCostConfig</span></code></a>.
There are two main parameters, an activation distance <span class="math notranslate nohighlight">\(\eta\)</span> which determines how far away from a collision should the collision
cost needs to be computed, motivated by results from <a class="reference external" href="https://www.nathanratliff.com/thesis-research/chomp">CHOMP</a>. This is computed using the below
equation where <span class="math notranslate nohighlight">\(d\)</span> is the signed distance and is positive when in collision and negative outside collision,</p>
<div class="math-wrapper docutils container">
<div class="math notranslate nohighlight">
\[\begin{split}\text{cost}(d) = \begin{cases}
0 &amp; d \leq -\eta\\
\frac{1}{\eta} (d + \eta)^2  &amp; - \eta &lt; d \leq 0 \\
d + 0.5 \eta &amp; d &gt; 0
\end{cases}\end{split}\]</div>
</div>
<a class="reference internal image-reference" href="../_images/cost_barrier.svg"><img alt="../_images/cost_barrier.svg" class="align-center" src="../_images/cost_barrier.svg" style="width: 500px;" />
</a>
<p>The second parameter we use is the speed metric, which was also introduced in <a class="reference external" href="https://www.nathanratliff.com/thesis-research/chomp">CHOMP</a>. While
in CHOMP, the speed metric was used with a discrete collision checker, cuRobo implements a continuous collision checker to account for thin obstacles.
The speed metric is combined with this continuous collision checker to avoid obstacles in trajectory optimization. We show below the benefit of using the speed metric on a trajectory optimization problem. The left robot uses speed metric to push itself away from a thin wall while the right robot which does not have speed metric tries to rush through the collision as a way to reduce the overall cost incurred during trajectory
optimization.</p>
<p>
<video autoplay="True" loop="True" muted="True" preload="auto" width="100%"><source src="../videos/sweep.mp4" type="video/mp4"></video>
</p></section>
</section>
<section id="geometry-approximation-to-spheres">
<span id="attach-object-note"></span><h2>Geometry Approximation to Spheres<a class="headerlink" href="#geometry-approximation-to-spheres" title="Link to this heading">¶</a></h2>
<p>In manipulation tasks, we often need to grasp objects and relocate them to a different location. During the motion
of the grasped object, we would need to avoid collisions between the attached object and the world. Since cuRobo’s
collision checkers can only check between spheres and objects, we provide sphere generation techniques to approximate
geometries to a set of spheres. These techniques require a large number of spheres (100+) to approximate complex geometry.
We hence do not use these techniques to approximate robot geometry and rather use a tool in NVIDIA Isaac Sim to generate
manually robots as described in <a class="reference internal" href="../tutorials/1_robot_configuration.html#tut-robot-configuration"><span class="std std-ref">Configuring a New Robot</span></a>. However, the techniques can be used to approximate
grasped objects during pick and place tasks.</p>
<p>Here is an example of fitting 500 spheres to approximate a capsule,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">curobo.geom.sphere_fit</span> <span class="kn">import</span> <span class="n">SphereFitType</span>
<span class="kn">from</span> <span class="nn">curobo.geom.types</span> <span class="kn">import</span> <span class="n">Capsule</span><span class="p">,</span> <span class="n">WorldConfig</span>

<span class="n">obstacle_capsule</span> <span class="o">=</span> <span class="n">Capsule</span><span class="p">(</span>
   <span class="n">name</span><span class="o">=</span><span class="s2">&quot;capsule&quot;</span><span class="p">,</span>
   <span class="n">radius</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
   <span class="n">base</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
   <span class="n">tip</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span>
   <span class="n">pose</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.043</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.471</span><span class="p">,</span> <span class="mf">0.284</span><span class="p">,</span> <span class="mf">0.834</span><span class="p">],</span>
   <span class="n">color</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
<span class="p">)</span>

<span class="n">sph</span> <span class="o">=</span> <span class="n">obstacle_capsule</span><span class="o">.</span><span class="n">get_bounding_spheres</span><span class="p">(</span><span class="n">n_spheres</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>

<span class="n">WorldConfig</span><span class="p">(</span><span class="n">spheres</span><span class="o">=</span><span class="n">sph</span><span class="p">)</span><span class="o">.</span><span class="n">save_world_as_mesh</span><span class="p">(</span><span class="s2">&quot;bounding_spheres.obj&quot;</span><span class="p">)</span>

<span class="n">WorldConfig</span><span class="p">(</span><span class="n">capsule</span><span class="o">=</span><span class="p">[</span><span class="n">obstacle_capsule</span><span class="p">])</span><span class="o">.</span><span class="n">save_world_as_mesh</span><span class="p">(</span><span class="s2">&quot;capsule.obj&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>cuRobo provides five different methods to fit spheres to geometry as listed in
<a class="reference internal" href="../_api/curobo.geom.sphere_fit.html#curobo.geom.sphere_fit.SphereFitType" title="curobo.geom.sphere_fit.SphereFitType"><code class="xref py py-class docutils literal notranslate"><span class="pre">curobo.geom.sphere_fit.SphereFitType</span></code></a>. The fit types leverage voxelization of geometry and
surface sampling to approximate a geometry. In short,</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SAMPLE_SURFACE</span></code> samples the surface of the mesh to approximate geometry.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VOXEL_SURFACE</span></code> voxelizes the volume and returns voxel positions that are intersecting with surface.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VOXEL_VOLUME_INSIDE</span></code> voxelizes the volume and returns voxel positions that are inside the surface of the geometry.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VOXEL_VOLUME</span></code> voxelizes the volume and returns all ocupioed voxel positions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">VOXEL_VOLUME_SAMPLE_SURFACE</span></code> voxelizes the volume and returns voxel positions that are inside the surface, along with surface sampled positions.</p></li>
</ul>
<p>The effect of each fit type on YCB objects is visualized
below,</p>
<figure class="align-default" id="id6">
<a class="reference internal image-reference" href="../_images/sphere_approx.png"><img alt="../_images/sphere_approx.png" src="../_images/sphere_approx.png" style="width: 690px;" />
</a>
<figcaption>
<p><span class="caption-text">From left to right: SAMPLE_SURFACE,  VOXEL_VOLUME_SAMPLE_SURFACE, Mesh, VOXEL_SURFACE, VOXEL_VOLUME_INSIDE, VOXEL_VOLUME.</span><a class="headerlink" href="#id6" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="2d_nvblox_demo.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Using with Depth Camera</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="2b_isaacsim_examples.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Using with Isaac Sim</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023-2024, NVIDIA
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/NVLabs/curobo" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Collision World Representation</a><ul>
<li><a class="reference internal" href="#world-representation">World Representation</a></li>
<li><a class="reference internal" href="#world-collision-checkers">World Collision Checkers</a><ul>
<li><a class="reference internal" href="#batched-environments">Batched Environments</a></li>
</ul>
</li>
<li><a class="reference internal" href="#collision-checking-implementation">Collision Checking Implementation</a><ul>
<li><a class="reference internal" href="#collision-metric">Collision Metric</a></li>
</ul>
</li>
<li><a class="reference internal" href="#geometry-approximation-to-spheres">Geometry Approximation to Spheres</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=674563c9"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"TeX": {"Macros": {"T": ["{\\textsf{T}}", 0], "abs": ["{\\left\\lvert#1\\right\\rvert}", 1], "norm": ["{\\left\\lVert#1\\right\\rVert}", 1], "det": ["{\\left\\lvert#1\\right\\rvert}", 1], "innerprod": ["{\\left\\langle#1,#2\\right\\rangle}", 2], "vector": ["{[#1_1,\\ldots,#1_{#2}]}", 2], "N": "{\\mathbb{N}}", "Z": "{\\mathbb{Z}}", "R": "{\\mathbb{R}}", "C": "{\\mathbb{C}}", "Im": ["{\\mathcal{R}(#1)}", 1], "Ker": ["{\\mathcal{N}(#1)}", 1], "Tr": "{\\text{Tr}}", "pd": ["{\\frac{\\partial{#1}}{\\partial{#2}}}", 2], "E": ["{\\mathbf{E}\\left[#1\\right]}", 1], "V": ["{\\mathbf{V}\\left[#1\\right]}", 1], "U": "{\\mathcal{U}}", "half": "{\\frac{1}{2}}", "ceil": ["{\\left \\lceil{#1}\\right \\rceil}", 1], "floor": ["{\\left \\lfloor{#1}\\right \\rfloor}", 1]}}})</script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>